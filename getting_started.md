# C. Getting Started

To do basic information security reviews, we need to get our testing environment set up and ready to test. This includes preparing our web browser, any mobile devices we will use to test, and installing some additional software on our local computer.

The tests in this document make extensive use of an intercepting proxy to observe, and in some cases modify, the network requests generated by the application under test. There are many different proxies and tools that can be used, and the testing scenarios we describe are universal. However, in order to make the instructions in this handbook as accessible as possible to as many people as possible, our instructions focus on tools that are freely available. We also use open source tools whenever they are available.

While the bulk of our tests rely on an intercepting proxy to power more detailed analysis, two other tools - a cookie reader, and a browser extension called "Firebug" are used as well. These two tools can often be used to do a quick, more cursory examination to determine what additional tests might be necessary.

## C1 The Toolkit - A Summary

All of the tests documented in the primer were run using:

*   Firefox browser, with the
*   Firebug extension, and the
*   Advanced Cookie Manager plugin and the
*   OWASP Zed Attack Proxy.

Firefox is a free, open source browser and can be downloaded here:

https://www.mozilla.org/en-US/firefox/new/

Firebug is a browser extension that enables observation of the network requests and responses for Firefox browsing sessions. It can monitor both http and https traffic. Because of its straightforward setup and integration with the browser it is a good choice for tests that do not require the extra features of an external proxy such as OWASP ZAP.

More information about Firebug can be found at [http://getfirebug.com/](http://getfirebug.com/)

Advanced Cookie Manager plugin is a tool that lets us manipulate, inspect, and delete individual cookies. More information is available at https://addons.mozilla.org/en-US/firefox/addon/cookie-manager/

OWASP ZAP is a free, cross-platform and open-source proxy program developed and maintained by OWASP (Open Web App Security Project). It provides more advanced features than Firebug and can be used to monitor the network traffic of mobile devices, as well as programs or browsers running on any host on the tester's local network. ZAP downloads and documentation are available at

[https://www.owasp.org/index.php/OWASP_Zed_Attack_Proxy_Project](https://www.owasp.org/index.php/OWASP_Zed_Attack_Proxy_Project)

This rest of this section describes setting up the proxy and related testing tools, and how to use these tools to perform the tests in this handbook.

## C2 Installing and Using Firebug to Observe HTTP and HTTPS Traffic

To install Firebug, go to Tools -->Add ons, search for 'Firebug' and select it for installation to Firefox. A screenshot of the plugin's description page (to ensure you are getting the correct plugin) is shown below.

<figure>
  <img alt="" src="images/image57.png" width="624.00" height="56.00" title="">
    <br>
  <figcaption>Image Caption:</figcaption>
</figure>

As mentioned above, Firebug is a good choice for tests that don't require the advanced functionality of an external proxy such as OWASP ZAP. After Firebug has been installed, it can be viewed by clicking its icon in the Firefox toolbar. In this setup tutorial, we explain how to use some of the tools that come with Firebug, along with screenshots that show them in action.

The image below shows the Firebug icon in the toolbar, with configuration options that can be set to user preferences.

The Firebug display is shown below. The 'Net' tab shows the network requests and responses; make sure that the 'Persist' and 'All' options are selected.

<span>
<figure>
  <img alt="" src="images/image53.png" width="446.50" height="207.94" title="">
    <br>
  <figcaption>Image Caption:</figcaption>
</figure>
</span>

<span>
<figure>
  <img alt="" src="images/image46.png" width="624.00" height="185.33" title="">
    <br>
  <figcaption>Image Caption:</figcaption>
</figure>
</span>

The 'Persist' option prevents the display from being cleared on each new page load. However, Firebug will collapse prior pages in its display, and the tester may need to expand them back out to view the relevant transactions.

In the example below, the user has logged out of a service, and the browsing session prior to the logout has been collapsed.

<figure>
  <img alt="" src="images/image08.png" width="624.00" height="205.33" title="">
    <br>
  <figcaption>Image Caption:</figcaption>
</figure>

Clicking the highlighted triangle for that portion of the session will expand the display for this part of the session.

<figure>
  <img alt="" src="images/image65.png" width="624.00" height="225.33" title="">
    <br>
  <figcaption>Image Caption:</figcaption>
</figure>

Hovering the mouse over the transaction's entry will show the full URL, enabling a check for https on the request.

<figure>
  <img alt="" src="images/image27.png" width="624.00" height="52.00" title="">
    <br>
  <figcaption>Image Caption:</figcaption>
</figure>

The transaction's entry can also be expanded by clicking the triangle next to the transaction's entry.

<figure>
  <img alt="" src="images/image25.png" width="624.00" height="180.00" title="">
    <br>
  <figcaption>Image Caption:</figcaption>
</figure>

The descriptions of individual tests later in this document give more details of how to find the important parts of the request and response in the Firebug display for the test in question. Firebug is a useful tool for initial examinations of web pages, as it can be used to detect basic issues that merit additional testing. If an application opens new browser tabs or views as the user interacts with it, it may be necessary or more straightforward to observe the traffic in an external proxy (such as ZAP, described below).

* * *

## C3 Installing and Using Advanced Cookie Manager

Cookies are small text strings sent by servers to browsers in HTTP responses as the user interacts with a web service. The browser saves the cookie values and includes them with subsequent HTTP requests to the same application or domain. The use of cookies allows web services to maintain the "state" of a session so that previous interactions can be taken into account when new requests arrive. A cookie editor can be used to examine and modify an application's cookies, and these capabilities are utilized by the test procedures for Authentication Token and Cookie Handling (GET SECTION INFO).

Many cookie managers are available as browser plugins. The examples in this document use the Advanced Cookie Manager plugin for Firefox. To find it, go to Tools->Add ons, search for cookie managers and select Advanced Cookie Manager for installation to Firefox. A screenshot of the plugin's description page is shown below.

Once installed, the cookie manager can be opened by clicking its icon in the browser add-ins toolbar or from the add-ins menu. An annotated view of the Advanced Cookie Manager panel is shown below

<figure>
  <img alt="" src="images/image26.png" width="624.00" height="164.00" title="">
    <br>
  <figcaption>Image Caption:</figcaption>
</figure>

<figure>
  <img alt="" src="images/image112.png" width="624.00" height="362.67" title="">
    <br>
  <figcaption>Image Caption:</figcaption>
</figure>

During several of the tests outlined below in Section F, the Cookie Manager will be used to view cookies and their flags, delete cookies, save cookies to file and restore cookies from file. Inspecting cookies is also helpful to

learn more about what information is sent to different services on the internet.

## C4 Installing and Using ZAP Proxy to Observe HTTP and HTTPS Traffic

As the name implies, an intercepting proxy intercepts and logs the requests and responses between a client (browser or mobile app) and the network resources with which it interacts. This enables observation of the behavior of the application without interfering with its functionality.

Setting up a proxy on your computer allows the user to review all network traffic on that computer in greater detail. While Firebug allows the user to see some transactions, an intercepting proxy provides a more comprehensive picture. For example, a portion of a proxy log from loading "graphite.org" in a browser is shown below:

<figure>
  <img alt="" src="images/image50.png" width="624.00" height="113.33" title="">
    <br>
  <figcaption>Image Caption:</figcaption>
</figure>

Once a browser or mobile device has been configured to send traffic to a proxy, the proxy can observe and capture HTTP (non-encrypted) traffic without additional setup. However, capturing https traffic requires additional steps. A detailed technical description of https (SSL) and [TLS](https://en.wikipedia.org/wiki/Transport_Layer_Security) are beyond the scope of this document, however a general description of how a proxy can observe https traffic, along with basic setup steps, is included below.

The normal operation of https creates an encrypted connection between the web browser/app and the resources with which it communicates. Because the traffic is encrypted, the proxy is not able to decipher the encrypted contents of the messages sent or received. To see the encrypted traffic, we must configure the browser or device to "trust" the proxy and allow it to decode the https communication by installing an SSL certificate - generated by the proxy - in the browser or device. This SSL certificate allows the proxy to decrypt the messages as they are received by the user, and then re-encrypt the messages before sending them to the ultimate recipient. The following [diagram from the OWASP ZAP](https://github.com/zaproxy/zap-core-help/blob/master/src/help/zaphelp/contents/images/maninthemiddle.png) [documentation](https://github.com/zaproxy/zap-core-help/blob/master/src/help/zaphelp/contents/images/maninthemiddle.png) (image released under a [CC-SA](http://creativecommons.org/licenses/by-sa/3.0/) license) illustrates the connections between the user, proxy and web resources.

The instructions included here are broken into five distinct sections:

<figure>
  <img alt="" src="images/image106.png" width="578.00" height="184.00" title="">
    <br>
  <figcaption>Image Caption:</figcaption>
</figure>

*   C4.1 Installation
*   C4.2 Basic setup, browser and proxy on same computer
*   C4.3 Mobile device (or browser) on different computer than the proxy
*   C4.4 Installing proxy SSL certificate to browser and mobile devices
*   C4.5 Observing websockets traffic using ZAP Proxy

If you are primarily concerned with testing web applications, you will not need to use any of the instructions in C4.3.

If you are going to test mobile apps, then the instructions in C4.3 cover the details of preparing this testing environment.

Using the ZAP Proxy requires additional setup steps than other elements of the Toolkit. Fortunately, these steps only need to be completed once. Additionally, in many cases, Firebug can be used to perform initial reviews that can determine whether a more detailed examination via an intercepting proxy is necessary.

### C4.1 Installation and Initial Setup

The remainder of this section will show the basics of setting up ZAP to work with browsers and mobile devices. For complete overview of the full feature set of ZAP, consult the documentation at the ZAP project page.

ZAP is available for download at the ZAP project page:

[https://www.owasp.org/index.php/OWASP_Zed_Attack_Proxy_Project](https://www.owasp.org/index.php/OWASP_Zed_Attack_Proxy_Project)

The download packages and installation instructions are platform-specific for Windows, Apple, and Linux. Choose the Standard package and follow the installation instructions for your desired platform.

After installation, modify the 'Display' settings to enable 'process images in HTTP requests/responses'. This configuration causes image loads that may be of interest during testing to be displayed in the history log, and is recommended for all of the test setups described in the remainder of this section. In ZAP this setting is managed in the Tools -->Options -->Display menu.

<figure>
  <img alt="" src="images/image89.png" width="527.50" height="410.00" title="">
    <br>
  <figcaption>Image Caption:</figcaption>
</figure>

Select the checkbox for "Process images in HTTP requests/responses." Then, click the "OK" button.

### C4.2 Basic setup, browser and proxy on same computer

The most straightforward setup is when the browser and proxy are on the same computer.

#### C4.2.1 ZAP

Within ZAP, the local proxy address should be set up as 'localhost', and port set to 8080 (this is the default setting at install). In ZAP, this setting is managed in the Tools -->Options -->Local proxy menu.

<figure>
  <img alt="" src="images/image10.png" width="569.50" height="419.82" title="">
    <br>
  <figcaption>Image Caption:</figcaption>
</figure>

#### C4.2.2 Browser

The browser should be set up to use a proxy at 'localhost' and port 8080.

Firefox manages this in Preferences -> Advanced -> Network -> Connection, as shown below.

<figure>
  <img alt="" src="images/image41.png" width="605.50" height="305.66" title="">
    <br>
  <figcaption>Image Caption:</figcaption>
</figure>

*   Select "Manual proxy configuration."
*   Set "HTTP Proxy" to localhost, and "Port" to 8080.
*   Select the option to "Use this proxy server for all protocols."

Then, click the "OK" button.

To complete the setup, skip ahead to the "C4.4 Installing Proxy SSL Certificate to Browser and Mobile Devices" section below.

### C4.3 Mobile device (or browser) on different computer than the proxy

The steps in this section are only relevant in the following scenarios:

*   Testing traffic coming from a phone or a tablet
*   Testing traffic coming from multiple computers (for example, if the tests will compare traffic from a Chromebook, an Apple computer, and/or a Windows computer)

For monitoring mobile device traffic, or if a browser under testing will be on a different computer than the proxy, it is required to configure the proxy with the network address of the proxy computer instead of 'localhost' (as set up above).

#### C4.3.1 Find the network address of the proxy computer

The first step is to determine the network address of the proxy computer. The procedure is different for Windows, MacOS, and Linux.

##### C4.3.1.1 Windows:

The network address can be found under:

Control Panel->Network and Internet->Network and Sharing Center

From this dialog, select the active network, which will bring up a status menu to select "Details."

<figure>
  <img alt="" src="images/image52.png" width="338.50" height="368.34" title="">
    <br>
  <figcaption>Image Caption:</figcaption>
</figure>

The "Details" dialog will display the network address of the computer. In almost all cases, the IPv4 address (not the IPv6 address) is the one that should be used as the proxy's network address, as shown below.

<figure>
  <img alt="" src="images/image87.png" width="312.50" height="364.58" title="">
    <br>
  <figcaption>Image Caption:</figcaption>
</figure>

##### C4.3.1.2 Apple OSX:

The network address can be found in System Preferences->Network, as shown below.

<figure>
  <img alt="" src="images/image24.png" width="624.00" height="190.67" title="">
    <br>
  <figcaption>Image Caption:</figcaption>
</figure>

##### C4.3.1.3 Linux/Unix:

Many distributions include a System Preferences utility that can be used to find the computer's network address. Another option is to use the 'ip address' command from the shell and look for the 'inet' entry on the appropriate interface, as shown below.

<pre>
<code>
$ ip address
1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu 65536 qdisc noqueue state UNKNOWN group default 
    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00
    inet 127.0.0.1/8 scope host lo
       valid_lft forever preferred_lft forever
    inet6 ::1/128 scope host 
       valid_lft forever preferred_lft forever
2: eth0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc pfifo_fast state UP group default qlen 1000
    link/ether 00:0c:29:20:f6:c1 brd ff:ff:ff:ff:ff:ff
    inet 192.168.251.211/24 brd 192.168.251.255 scope global eth0
       valid_lft forever preferred_lft forever
    inet6 fe80::20c:29ff:fe20:f6c1/64 scope link 
       valid_lft forever preferred_lft forever
</code>
</pre>

#### C4.3.2 In ZAP Proxy: Change "Local proxy" address

The proxy setup procedure is the same as covered in "C4.2 Proxy and Browser on Same Computer", except that the network address of the computer (which we discovered in the prior step) should be entered in the address field.

* * *

#### 

<figure>
  <img alt="" src="images/image118.png" width="523.50" height="338.93" title="">
    <br>
  <figcaption>Image Caption:</figcaption>
</figure>

#### C4.3.3 In Firefox: Change the "Manual proxy configuration" address

In Firefox, under Preferences->Advanced->Network->Connection, select Manual Proxy and enter the network address found in the steps above.

Once the settings have been updated, click the "OK" button to save the changes.

<figure>
  <img alt="" src="images/image60.png" width="385.50" height="455.81" title="">
    <br>
  <figcaption>Image Caption:</figcaption>
</figure>

#### C4.3.4 iOS Device setup

On an iOS (Apple) device go to Settings->Wifi, and make sure your device is on the same network as the proxy computer.

Select the info screen for the network the device is connected to.

<figure>
  <img alt="" src="images/image56.png" width="337.00" height="162.26" title="">
    <br>
  <figcaption>Image Caption:</figcaption>
</figure>

The proxy settings are at the bottom of the network settings screen. Enable manual proxy settings and enter the network address found in the previous steps, and the port number as shown below (using the address found in step C4.3.1).

<figure>
  <img alt="" src="images/image29.png" width="337.00" height="183.82" title="">
    <br>
  <figcaption>Image Caption:</figcaption>
</figure>

#### C4.3.5 Android device proxy setup

Open the settings menu and select wifi.

<figure>
  <img alt="" src="images/image104.png" width="512.00" height="205.00" title="">
    <br>
  <figcaption>Image Caption:</figcaption>
</figure>

Press and hold the name of the network to bring up the network settings menu, and select "Modify network".

<figure>
  <img alt="" src="images/image51.png" width="374.00" height="99.00" title="">
    <br>
  <figcaption>Image Caption:</figcaption>
</figure>

Select "Show advanced options", and then select "Manual proxy configurations". Use the network address and port number from step C4.3.1, as illustrated below.

Click the "Save" link to save the settings.

<figure>
  <img alt="" src="images/image11.png" width="349.00" height="395.00" title="">
    <br>
  <figcaption>Image Caption:</figcaption>
</figure>

### C4.4 Installing proxy SSL certificate to browser and mobile devices

Installing the proxy's SSL certificate to browsers and devices will allow the proxy to decrypt the https traffic generated by these clients. In this section, we will cover using ZAP to generate a SSL certificate. Then, we will document how to save this certificate to our testing browser, and/or a mobile device.

#### C4.4.1 Save proxy certificate to file

The proxy's SSL certificate can be saved from the ZAP Preferences->Dynamic SSL Certificates menu. Open the dialog and click on 'save'.

<figure>
  <img alt="" src="images/image110.png" width="624.00" height="505.33" title="">
    <br>
  <figcaption>Image Caption:</figcaption>
</figure>

The file will be saved as "owasp_zap_root_ca.cer" in the directory chosen by the user.

<figure>
  <img alt="" src="images/image37.png" width="551.00" height="75.00" title="">
    <br>
  <figcaption>Image Caption:</figcaption>
</figure>

#### C4.4.2 Import proxy certificate to browser

In Firefox, certificates can be installed in the Preferences->Advanced->Certificates dialog.

Within this dialog select "View Certificates"

<figure>
  <img alt="" src="images/image98.png" width="624.00" height="309.33" title="">
    <br>
  <figcaption>Image Caption:</figcaption>
</figure>

In the "View Certificates" dialog, select "Import".

<figure>
  <img alt="" src="images/image36.png" width="570.00" height="323.00" title="">
    <br>
  <figcaption>Image Caption:</figcaption>
</figure>

Then, select the root certificate (owasp_zap_root_ca.cer) downloaded from the ZAP Proxy, and open it, as shown in the screenshot below.

<figure>
  <img alt="save_cert.png" src="images/image58.png" width="624.00" height="392.00" title="">
    <br>
  <figcaption>Image Caption:</figcaption>
</figure>

Then, select the option to "Trust this CA to identify websites", and click the "OK" button.

<figure>
  <img alt="" src="images/image83.png" width="540.11" height="286.50" title="">
    <br>
  <figcaption>Image Caption:</figcaption>
</figure>

Verify that the certificate has been uploaded by browsing to it. All Certificate Authorities are listed alphabetically. Once you have verified that the certificate has been uploaded, click the "OK" button.

<figure>
  <img alt="save_cert_final.png" src="images/image117.png" width="624.00" height="402.67" title="">
    <br>
  <figcaption>Image Caption:</figcaption>
</figure>

Note: When you are not testing, you might want to remove the certificate from the browser.

To remove the certificate, in Firefox go to the Preferences->Advanced->Certificates->View Certificates menu, select the OWASP Zed Attack Proxy Root CA certificate, and click on "Delete or Distrust".

<figure>
  <img alt="" src="images/image105.png" width="554.00" height="289.00" title="">
    <br>
  <figcaption>Image Caption:</figcaption>
</figure>

#### C4.4.3 Import proxy certificate to iOS device

##### C4.4.3.1 Transfer proxy certificate file to the device

It is important to take care when transferring the certificate file to the device, as anyone who possesses it could potentially use it to decrypt https communications from devices that install the certificate. A secure file sharing service is one good way to transfer the file. For iOS devices, the file must be accessed from the file sharing service using the browser, not the sharing service's iOS app. Accessing the file from within the browser interface to the sharing service will bring up the "Install Profile" dialog described in the next step of the setup. For Android devices, any method of storing the certificate file to the device's storage (browser, sharing service app, direct transfer over USB) can be used, and the file is accessed using the "Install from SD Card" functionality as described below.

##### C4.4.3.2 Install proxy certificate file to the device

Once the certificate file has been transferred to the device, open it on the device. Opening the file will bring up the "Install Profile" dialog. (iOS refers to certificates with the broader term "Profile"). Select "Install" from within this dialog.

<figure>
  <img alt="" src="images/image40.png" width="482.50" height="395.90" title="">
    <br>
  <figcaption>Image Caption:</figcaption>
</figure>

After a device password check, the "Install Profile" dialog will bring up a second dialog with a warning about installing a certificate to the device. Since the objective is to install the proxy's certificate to allow monitoring of https traffic, it is OK to accept the warning and select "Install".

<figure>
  <img alt="" src="images/image66.png" width="446.50" height="366.36" title="">
    <br>
  <figcaption>Image Caption:</figcaption>
</figure>

After the certificate is installed, a screen will confirm that the certificate was successfully installed.

<figure>
  <img alt="" src="images/image07.png" width="467.50" height="340.89" title="">
    <br>
  <figcaption>Image Caption:</figcaption>
</figure>

Note: to remove the certificate after testing is complete, go to the Settings->General menu and scroll down. The certificate will be listed under "Profile".

<figure>
  <img alt="" src="images/image80.png" width="370.00" height="563.00" title="">
    <br>
  <figcaption>Image Caption:</figcaption>
</figure>

Select "Profile" to enter a dialog that provides the option to delete the certificate.

<figure>
  <img alt="" src="images/image91.png" width="375.00" height="305.00" title="">
    <br>
  <figcaption>Image Caption:</figcaption>
</figure>

#### C4.4.3 Import proxy certificate to Android device

##### C4.4.3.1 Transfer proxy certificate file to the device

Copy the proxy certificate file to the Android's SD card or other internal storage (The example shown below uses the SD card).

#### C4.4.3.2 Install the proxy certificate file to the device

This document covers installation for Android versions 4.3 and above. The installation is slightly different for Android 4.3, Android 4.4, and higher. Select the installation that corresponds to your device's Android version.

Android 4.3:

In the Settings->Security dialog, select "Install from SD Card".

<figure>
  <img alt="" src="images/image45.png" width="476.00" height="782.00" title="">
    <br>
  <figcaption>Image Caption:</figcaption>
</figure>

A dialog titled "Name the Certificate" will pop up. Leave the name unchanged and select "OK".

<figure>
  <img alt="" src="images/image02.png" width="357.00" height="221.00" title="">
    <br>
  <figcaption>Image Caption:</figcaption>
</figure>

Note: To remove the certificate, go to the Setup->Security->Trusted Credentials->User dialog.

<figure>
  <img alt="" src="images/image75.png" width="528.00" height="449.00" title="">
    <br>
  <figcaption>Image Caption:</figcaption>
</figure>

Select the OWASP certificate to bring up another menu with an option to remove the certificate.

<figure>
  <img alt="" src="images/image20.png" width="363.00" height="552.00" title="">
    <br>
  <figcaption>Image Caption:</figcaption>
</figure>

Android 4.4 and higher:

In the Settings->Security dialog, select "Install from SD Card".

<figure>
  <img alt="" src="images/image47.png" width="308.50" height="286.14" title="">
    <br>
  <figcaption>Image Caption:</figcaption>
</figure>

A dialog showing the downloads directory will show up. However, the process usually requires the certificate to be accessed through "Internal Storage" instead, using the following sequence:

Select the menu tab at top left corner.

<figure>
  <img alt="" src="images/image09.png" width="455.50" height="199.28" title="">
    <br>
  <figcaption>Image Caption:</figcaption>
</figure>

Select "Internal Storage" from the following menu.

<figure>
  <img alt="" src="images/image04.png" width="323.50" height="362.54" title="">
    <br>
  <figcaption>Image Caption:</figcaption>
</figure>

Select "Download" from the Internal Storage choices.

<figure>
  <img alt="" src="images/image44.png" width="329.50" height="354.85" title="">
    <br>
  <figcaption>Image Caption:</figcaption>
</figure>

Select the certificate file.

<figure>
  <img alt="" src="images/image31.png" width="299.50" height="148.82" title="">
    <br>
  <figcaption>Image Caption:</figcaption>
</figure>

A dialog titled "Name the Certificate" will pop up. Enter a name, leave "Credential Use" set to "VPN and apps" and select "OK" to install the certificate. NOTE: If the device does not have a screen lock pin or passcode, a window will pop up requiring one to be set.

<figure>
  <img alt="" src="images/image113.png" width="324.91" height="314.50" title="">
    <br>
  <figcaption>Image Caption:</figcaption>
</figure>

Note: To remove the certificate, go to the Setup->Security->Clear Credentials.

<figure>
  <img alt="" src="images/image62.png" width="306.45" height="273.50" title="">
    <br>
  <figcaption>Image Caption:</figcaption>
</figure>

Click "OK" to clear credentials. Only the user-installed credentials are cleared.

<figure>
  <img alt="" src="images/image108.png" width="398.50" height="193.00" title="">
    <br>
  <figcaption>Image Caption:</figcaption>
</figure>

### C4.5 Observing websockets traffic using ZAP Proxy

Websockets is a communication link separate from HTTP that browsers and application servers can use to pass information back and forth. It is normally a secondary form of communication that is connected after the web application loads into the browser. If an application uses websockets, the traffic is of interest for security testing because it may contain personal information of the account holder or other users of the system.

ZAP Proxy supports the viewing of websockets traffic. (Note: Firebug does not support viewing of websockets traffic). By default the websockets pane is not one of the choices shown in the toolbar at the center of the ZAP display.

<figure>
  <img alt="" src="images/image70.png" width="458.00" height="61.00" title="">
    <br>
  <figcaption>Image Caption:</figcaption>
</figure>

The websockets pane can be added by clicking the green "+" and selecting it from the dropdown menu.

<figure>
  <img alt="" src="images/image90.png" width="592.00" height="272.00" title="">
    <br>
  <figcaption>Image Caption:</figcaption>
</figure>

The pane will also be added automatically to the toolbar by ZAP if a websockets connection is opened through the proxy. A view of the websockets traffic pane is shown below. Clicking on an individual message will show the full payload of the message in the upper pane of ZAP (where HTTP requests and responses are normally shown).

From the websockets view, it is also possible to determine whether the websockets traffic is sent over an encrypted connection. The steps for checking whether the traffic is encrypted are detailed in section E8 Observation of websockets traffic.

<figure>
  <img alt="" src="images/image76.png" width="717.98" height="107.50" title="">
    <br>
  <figcaption>Image Caption:</figcaption>
</figure>
